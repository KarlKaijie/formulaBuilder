!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Formula",[],t):"object"==typeof exports?exports.Formula=t():e.Formula=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=25)}([function(e,t,n){(function(t){var n;n=function(){"use strict";var e=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};function n(e,t){return e(t={exports:{}},t.exports),t.exports}e.prototype.stringify=function(){return this.content},e.prototype.toString=function(){return this.stringify()},e.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))},"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var r=n((function(e,t){e.exports=function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(t,n){var o;return n&&!0===n.clone&&e(t)?r((o=t,Array.isArray(o)?[]:{}),t,n):t}function n(n,o,i){var a=n.slice();return o.forEach((function(o,s){void 0===a[s]?a[s]=t(o,i):e(o)?a[s]=r(n[s],o,i):-1===n.indexOf(o)&&a.push(t(o,i))})),a}function r(o,i,a){var s=Array.isArray(i),l=(a||{arrayMerge:n}).arrayMerge||n;return s?Array.isArray(o)?l(o,i,a):t(i,a):function(n,o,i){var a={};return e(n)&&Object.keys(n).forEach((function(e){a[e]=t(n[e],i)})),Object.keys(o).forEach((function(s){e(o[s])&&n[s]?a[s]=r(n[s],o[s],i):a[s]=t(o[s],i)})),a}(o,i,a)}return r.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return r(e,n,t)}))},r}()})),o=n((function(e,t){t.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},e.exports=t.default})),i=o.svg,a=o.xlink,s={};s[i.name]=i.uri,s[a.name]=a.uri;var l=function(e,t){return void 0===e&&(e=""),"<svg "+function(e){return Object.keys(e).map((function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'})).join(" ")}(r(s,t||{}))+">"+e+"</svg>"};return function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n}(l(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,n),t}(e)},e.exports=n()}).call(this,n(10))},function(e,t,n){(function(t){var n;n=function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var n=e((function(e,t){e.exports=function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(t,n){var o;return n&&!0===n.clone&&e(t)?r((o=t,Array.isArray(o)?[]:{}),t,n):t}function n(n,o,i){var a=n.slice();return o.forEach((function(o,s){void 0===a[s]?a[s]=t(o,i):e(o)?a[s]=r(n[s],o,i):-1===n.indexOf(o)&&a.push(t(o,i))})),a}function r(o,i,a){var s=Array.isArray(i),l=(a||{arrayMerge:n}).arrayMerge||n;return s?Array.isArray(o)?l(o,i,a):t(i,a):function(n,o,i){var a={};return e(n)&&Object.keys(n).forEach((function(e){a[e]=t(n[e],i)})),Object.keys(o).forEach((function(s){e(o[s])&&n[s]?a[s]=r(n[s],o[s],i):a[s]=t(o[s],i)})),a}(o,i,a)}return r.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return r(e,n,t)}))},r}()})),r=e((function(e,t){t.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},e.exports=t.default})),o=r.svg,i=r.xlink,a={};a[o.name]=o.uri,a[i.name]=i.uri;var s,l=function(e,t){return void 0===e&&(e=""),"<svg "+function(e){return Object.keys(e).map((function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'})).join(" ")}(n(a,t||{}))+">"+e+"</svg>"},u=r.svg,c=r.xlink,f={attrs:(s={style:["position: absolute","width: 0","height: 0"].join("; "),"aria-hidden":"true"},s[u.name]=u.uri,s[c.name]=c.uri,s)},p=function(e){this.config=n(f,e||{}),this.symbols=[]};p.prototype.add=function(e){var t=this.symbols,n=this.find(e.id);return n?(t[t.indexOf(n)]=e,!1):(t.push(e),!0)},p.prototype.remove=function(e){var t=this.symbols,n=this.find(e);return!!n&&(t.splice(t.indexOf(n),1),n.destroy(),!0)},p.prototype.find=function(e){return this.symbols.filter((function(t){return t.id===e}))[0]||null},p.prototype.has=function(e){return null!==this.find(e)},p.prototype.stringify=function(){var e=this.config.attrs,t=this.symbols.map((function(e){return e.stringify()})).join("");return l(t,e)},p.prototype.toString=function(){return this.stringify()},p.prototype.destroy=function(){this.symbols.forEach((function(e){return e.destroy()}))};var d=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};d.prototype.stringify=function(){return this.content},d.prototype.toString=function(){return this.stringify()},d.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))};var m=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n},h=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return m(l(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,n),t}(d),g={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},v=function(e){return Array.prototype.slice.call(e,0)},y=function(){return/firefox/i.test(navigator.userAgent)},b=function(){return/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)},k=function(){return/edge/i.test(navigator.userAgent)},w=function(e){return(e||window.location.href).split("#")[0]},x=function(e){angular.module("ng").run(["$rootScope",function(t){t.$on("$locationChangeSuccess",(function(t,n,r){var o,i,a;o=e,i={oldUrl:r,newUrl:n},(a=document.createEvent("CustomEvent")).initCustomEvent(o,!1,!1,i),window.dispatchEvent(a)}))}])},T=function(e,t){return void 0===t&&(t="linearGradient, radialGradient, pattern, mask, clipPath"),v(e.querySelectorAll("symbol")).forEach((function(e){v(e.querySelectorAll(t)).forEach((function(t){e.parentNode.insertBefore(t,e)}))})),e},O=r.xlink.uri,_=/[{}|\\\^\[\]`"<>]/g;function S(e){return e.replace(_,(function(e){return"%"+e[0].charCodeAt(0).toString(16).toUpperCase()}))}var E,P=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],I=P.map((function(e){return"["+e+"]"})).join(","),C=function(e,t,n,r){var o=S(n),i=S(r);(function(e,t){return v(e).reduce((function(e,n){if(!n.attributes)return e;var r=v(n.attributes),o=t?r.filter(t):r;return e.concat(o)}),[])})(e.querySelectorAll(I),(function(e){var t=e.localName,n=e.value;return-1!==P.indexOf(t)&&-1!==n.indexOf("url("+o)})).forEach((function(e){return e.value=e.value.replace(new RegExp(o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),i)})),function(e,t,n){v(e).forEach((function(e){var r=e.getAttribute("xlink:href");if(r&&0===r.indexOf(t)){var o=r.replace(t,n);e.setAttributeNS(O,"xlink:href",o)}}))}(t,o,i)},j="mount",L="symbol_mount",N=function(e){function t(t){var r=this;void 0===t&&(t={}),e.call(this,n(g,t));var o,i=(o=o||Object.create(null),{on:function(e,t){(o[e]||(o[e]=[])).push(t)},off:function(e,t){o[e]&&o[e].splice(o[e].indexOf(t)>>>0,1)},emit:function(e,t){(o[e]||[]).map((function(e){e(t)})),(o["*"]||[]).map((function(n){n(e,t)}))}});this._emitter=i,this.node=null;var a=this.config;if(a.autoConfigure&&this._autoConfigure(t),a.syncUrlsWithBaseTag){var s=document.getElementsByTagName("base")[0].getAttribute("href");i.on(j,(function(){return r.updateUrls("#",s)}))}var l=this._handleLocationChange.bind(this);this._handleLocationChange=l,a.listenLocationChangeEvent&&window.addEventListener(a.locationChangeEvent,l),a.locationChangeAngularEmitter&&x(a.locationChangeEvent),i.on(j,(function(e){a.moveGradientsOutsideSymbol&&T(e)})),i.on(L,(function(e){var t;a.moveGradientsOutsideSymbol&&T(e.parentNode),(b()||k())&&(t=[],v(e.querySelectorAll("style")).forEach((function(e){e.textContent+="",t.push(e)})))}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={isMounted:{}};return r.isMounted.get=function(){return!!this.node},t.prototype._autoConfigure=function(e){var t=this.config;void 0===e.syncUrlsWithBaseTag&&(t.syncUrlsWithBaseTag=void 0!==document.getElementsByTagName("base")[0]),void 0===e.locationChangeAngularEmitter&&(t.locationChangeAngularEmitter=void 0!==window.angular),void 0===e.moveGradientsOutsideSymbol&&(t.moveGradientsOutsideSymbol=y())},t.prototype._handleLocationChange=function(e){var t=e.detail,n=t.oldUrl,r=t.newUrl;this.updateUrls(n,r)},t.prototype.add=function(t){var n=e.prototype.add.call(this,t);return this.isMounted&&n&&(t.mount(this.node),this._emitter.emit(L,t.node)),n},t.prototype.attach=function(e){var t=this,n=this;if(n.isMounted)return n.node;var r="string"==typeof e?document.querySelector(e):e;return n.node=r,this.symbols.forEach((function(e){e.mount(n.node),t._emitter.emit(L,e.node)})),v(r.querySelectorAll("symbol")).forEach((function(e){var t=h.createFromExistingNode(e);t.node=e,n.add(t)})),this._emitter.emit(j,r),r},t.prototype.destroy=function(){var e=this.config,t=this.symbols,n=this._emitter;t.forEach((function(e){return e.destroy()})),n.off("*"),window.removeEventListener(e.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},t.prototype.mount=function(e,t){if(void 0===e&&(e=this.config.mountTo),void 0===t&&(t=!1),this.isMounted)return this.node;var n="string"==typeof e?document.querySelector(e):e,r=this.render();return this.node=r,t&&n.childNodes[0]?n.insertBefore(r,n.childNodes[0]):n.appendChild(r),this._emitter.emit(j,r),r},t.prototype.render=function(){return m(this.stringify())},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},t.prototype.updateUrls=function(e,t){if(!this.isMounted)return!1;var n=document.querySelectorAll(this.config.usagesToUpdate);return C(this.node,n,w(e)+"#",w(t)+"#"),!0},Object.defineProperties(t.prototype,r),t}(p),F=e((function(e){var t,n,r,o,i;e.exports=(n=[],r=document,o=r.documentElement.doScroll,(i=(o?/^loaded|^c/:/^loaded|^i|^c/).test(r.readyState))||r.addEventListener("DOMContentLoaded",t=function(){for(r.removeEventListener("DOMContentLoaded",t),i=1;t=n.shift();)t()}),function(e){i?setTimeout(e,0):n.push(e)})}));window.__SVG_SPRITE__?E=window.__SVG_SPRITE__:(E=new N({attrs:{id:"__SVG_SPRITE_NODE__","aria-hidden":"true"}}),window.__SVG_SPRITE__=E);var A=function(){var e=document.getElementById("__SVG_SPRITE_NODE__");e?E.attach(e):E.mount(document.body,!0)};return document.body?A():F(A),E},e.exports=n()}).call(this,n(10))},function(e,t,n){"use strict";var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},r=[],o=0;o<e.length;o++){var i=e[o],l=t.base?i[0]+t.base:i[0],u=n[l]||0,c="".concat(l," ").concat(u);n[l]=u+1;var f=s(c),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==f?(a[f].references++,a[f].updater(p)):a.push({identifier:c,updater:g(p,t),references:1}),r.push(c)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var c,f=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function p(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=f(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function d(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var m=null,h=0;function g(e,t){var n,r,o;if(t.singleton){var i=h++;n=m||(m=u(t)),r=p.bind(null,n,i,!1),o=p.bind(null,n,i,!0)}else n=u(t),r=d.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=s(n[r]);a[o].references--}for(var i=l(e,t),u=0;u<n.length;u++){var c=s(n[u]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}n=i}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);r&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},function(e,t,n){"use strict";var r=n(3),o=n.n(r)()((function(e){return e[1]}));o.push([e.i,".fml-flex{display:flex}.fml-flex-wrap{flex-wrap:wrap}.fml-flex-1{flex:1}.fml-jc{justify-content:center}.fml-ac{align-self:center}.fml-rr{flex-direction:row-reverse}.fml-direction-column{flex-direction:column}.fml-jsb{justify-content:space-between}.fml-flex-end{justify-content:flex-end}.fml-relative{position:relative}.fml-curpointer{cursor:pointer}.fml-mb-12{margin-bottom:12px}.fml-ml-12{margin-left:12px}.fml-py-4{padding:2px 0}.vertical-sub{vertical-align:sub}.vertical-middle{vertical-align:middle}.fml-text-primary{color:#0084ff}",""]),t.a=o},function(e,t,n){"use strict";var r=n(3),o=n.n(r)()((function(e){return e[1]}));o.push([e.i,".fml-container ol,.fml-container ul{margin:0;padding:0}.fml-container li{list-style-type:none}.fml-container .fml-svg-icon{width:1.2em;height:1.2em;fill:currentColor;overflow:hidden;cursor:pointer}.fml-container .fml-left{border:1px solid #ccc;border-radius:4px 0 0 4px;padding:12px;flex:1}.fml-container .fml-left .fml-buttons{width:100%;align-items:center}.fml-container .fml-left .fml-buttons .fml-buttons-item{padding:0 4px;min-width:16px;height:24px;border-radius:3px;border:1px solid #0084ff;cursor:pointer;font-size:12px;text-align:center;line-height:24px;margin:4px;user-select:none;color:#0084ff}.fml-container .fml-left .fml-buttons .fml-buttons-item:hover{color:orange;border-color:orange;opacity:.6}.fml-container .fml-left .fml-buttons .fml-buttons-item:active{opacity:1}.fml-container .fml-left .fml-buttons .fml-operator-button{width:24px;height:24px;padding:0;border-color:orange;color:#000}.fml-container .fml-left .fml-buttons svg{width:12px;height:12px;vertical-align:middle}.fml-container .fml-left .fml-edit-container{width:100%;height:350px;border:1px solid #eee;border-radius:4px;padding:18px 12px;box-sizing:border-box;overflow:auto}.fml-container .fml-right{width:260px;box-sizing:border-box;border:1px solid #ccc;border-radius:0 4px 4px 0;border-left:none}.fml-container .fml-right .fml-fields-container{width:100%;height:100%;max-height:610px;overflow:hidden}.fml-container .fml-right .fml-fields-container .fml-title-vertical{padding-bottom:4px;display:block;width:100%;border-bottom:1px solid #eee;padding:8px 12px;box-sizing:border-box}.fml-container .fml-right .fml-fields-container ul{overflow:auto;height:calc(100% - 42px);margin:0 12px}.fml-container .fml-right .fml-fields-container ul li{margin:2px 0;font-size:16px}.fml-container .fml-bottom{border:1px solid #eee;margin-top:12px;border-radius:4px;height:180px;overflow:hidden}.fml-container .fml-bottom .fml-desc{width:60%;height:100%;border-left:1px solid #eee;padding:12px;box-sizing:border-box;word-break:break-word;overflow:auto;color:#333}.fml-container .fml-bottom .fml-desc p{font-size:12px;line-height:24px;margin:0}.fml-container .fml-bottom .fml-desc span{color:#666}.fml-container .fml-bottom .fml-bottom-wrap{overflow:hidden}.fml-container .fml-bottom .fml-bottom-wrap .fml-title-vertical{padding-bottom:4px;display:block;width:100%;border-bottom:1px solid #eee;padding:8px 6px;box-sizing:border-box}.fml-container .fml-bottom .fml-bottom-wrap ul{overflow:auto;height:calc(100% - 35px);padding:0 4px}.fml-container .fml-bottom .fml-bottom-wrap .fml-functoken-item{height:18px;border-bottom:1px dashed #eee;cursor:pointer;font-size:12px;display:flex;margin:4px;user-select:none}.fml-container .fml-bottom .fml-bottom-wrap .fml-functoken-item:hover{color:#0084ff;border-color:#0084ff;opacity:.6}.fml-container .fml-bottom .fml-bottom-wrap .fml-functoken-item:active{opacity:1}.fml-container .fml-title{font-size:16px;font-weight:bold;margin-right:8px;color:#333}.fml-container .fml-tip{color:#999;font-size:14px;line-height:30px;font-weight:normal;display:inline-block;min-width:52px;min-height:30px;padding:0 8px;border:1px dashed #0084ff;margin:0 4px;vertical-align:middle;border-radius:4px;text-align:center}.fml-container .fml-formula-clear{color:#999;font-size:12px;cursor:pointer;user-select:none}.fml-container .fml-formula-clear svg{color:#999;font-size:12px;font-weight:normal;opacity:.8;z-index:1;cursor:pointer;user-select:none}.fml-container .fml-formula-clear svg:hover{color:red}.fml-container .fml-formula-clear:hover{opacity:.6}.fml-container .fml-formula-clear:active{opacity:1}",""]),t.a=o},function(e,t,n){"use strict";var r=n(3),o=n.n(r)()((function(e){return e[1]}));o.push([e.i,".fml-token{cursor:pointer;padding:8px 0px;line-height:42px;text-align:center;border-radius:4px;word-break:break-all;vertical-align:middle;border:1px dashed transparent}.fml-token.active{border-color:var(--color) !important}.fml-token .fml-token-placeholder{padding:0 4px;color:#eee}.fml-token .fml-token-min-space{padding:8px 12px}.fml-empty{--color: #aaa;border:1px dashed #eee}.fml-const{--color: red;font-weight:bold !important}.fml-input{--color: green;padding:8px 12px;font-weight:normal !important}.fml-field{--color: #0084FF;font-weight:normal !important}.fml-function{--color: #c0399f}.fml-function .fml-function-name{font-weight:bold !important;vertical-align:middle;padding-left:2px}.fml-function .fml-function-name:hover{color:var(--color) !important}.fml-function .fml-function-comma{margin:0 6px 0 2px;color:var(--color)}.fml-function .fml-function-bracket{color:var(--color);width:4px;padding:0 2px;display:inline-block;text-align:center;border:1px dashed transparent;cursor:pointer;vertical-align:middle}.fml-function .fml-function-bracket.active{border-color:#000 !important}.fml-arith{--color: orange}.fml-arith .fml-arith-operator{margin:0 8px;color:var(--color)}.fml-arith .fml-arith-bracket{color:var(--color) !important;width:4px;padding:0 2px;display:inline-block;text-align:center;font-weight:bold;border:1px dashed transparent;cursor:pointer;vertical-align:middle}.fml-arith .fml-arith-bracket.active{border-color:#000 !important}.fml-field-line{width:1px;height:80%;border-right:1px dashed #ccc;margin:0 8px;vertical-align:middle}.fml-formula-add{user-select:none}.fml-formula-add svg{font-size:16px;vertical-align:middle;font-weight:normal;opacity:.4;cursor:pointer;user-select:none}.fml-formula-add svg:hover{opacity:.6}.fml-formula-add svg:active{opacity:1}.fml-formula-reset svg{position:absolute;top:-9px;left:-10px;font-size:12px;color:red;vertical-align:middle;font-weight:normal;margin:0 4px;opacity:.6;z-index:9;cursor:pointer;user-select:none}.fml-formula-reset svg:hover{opacity:.8}.fml-formula-reset svg:active{opacity:1}.fml-formula-delete svg{position:absolute;top:28px;left:-10px;font-size:12px;color:red;vertical-align:middle;font-weight:normal;margin:0 4px;opacity:.6;z-index:9;cursor:pointer;user-select:none}.fml-formula-delete svg:hover{opacity:.8}.fml-formula-delete svg:active{opacity:1}",""]),t.a=o},function(e,t,n){"use strict";var r=n(3),o=n.n(r)()((function(e){return e[1]}));o.push([e.i,".fml-formula-preview .fml-function-comma{margin:0 8px 0 0}",""]),t.a=o},function(e,t,n){"use strict";var r=n(3),o=n.n(r)()((function(e){return e[1]}));o.push([e.i,".fml-input[data-v-415832ce]{width:200px;padding:8px 14px;font-size:14px;font-weight:700;outline-style:none;border-radius:3px;border:1px solid #ccc}.fml-input[data-v-415832ce]:focus{border-color:#66afe9;outline:0;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 4px rgba(102,175,233,.6);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 4px rgba(102,175,233,.6)}.fml-input.fml-input-err[data-v-415832ce],.fml-input.fml-input-err[data-v-415832ce]:focus{border-color:#e41912;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 4px rgba(228,25,18,.6);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 4px rgba(228,25,18,.6)}.fml-input[data-v-415832ce]::-webkit-input-placeholder{font-size:12px;font-weight:normal}",""]),t.a=o},function(e,t,n){"use strict";var r=n(3),o=n.n(r)()((function(e){return e[1]}));o.push([e.i,".fml-select-wrapper{position:relative;width:160px}.fml-select-wrapper .fml-select-input-wraper{border:1px solid #ccc;border-radius:3px;background:#fff;position:relative;z-index:3;color:#44474c}.fml-select-wrapper .fml-select-input-wraper .fml-select-input{width:100%;height:32px;min-width:80px;line-height:32px;overflow:hidden;font-size:14px;cursor:pointer;border-radius:3px 0 0 3px}.fml-select-wrapper .fml-select-input-wraper .fml-select-content{text-align:left;padding:0 8px}.fml-select-wrapper .fml-select-input-wraper .fml-triangle-wrapper{flex-shrink:0;width:32px;height:32px;line-height:32px;cursor:pointer;border-left:1px solid #eee;text-align:center;border-radius:0 3px 3px 0}.fml-select-wrapper .fml-select-input-wraper .fml-triangle-down{display:inline-block}.fml-select-wrapper .fml-select-input-wraper .fml-triangle-down svg{width:1em;height:1em}.fml-select-wrapper .fml-select-input-wraper .fml-triangle-rotate{transform:rotate(180deg);transition:all .3s;transform-origin:center}.fml-select-wrapper .fml-option-wrapper{position:absolute;z-index:1;left:0;top:32px;overflow-x:hidden;min-width:100px;border-right:1px solid #ccc;border-bottom:1px solid #ccc;border-left:1px solid #ccc;background:#fff;display:none;border-radius:0 0 4px 4px;max-height:200px;overflow-y:auto}.fml-select-wrapper .fml-option-wrapper .fml-option-item{min-width:100px;height:32px;line-height:32px;padding-right:10px;box-sizing:border-box;cursor:pointer;font-size:14px;padding:0 8px;border-bottom:1px dashed #ccc;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:#44474c}.fml-select-wrapper .fml-option-wrapper .fml-option-item:first-child{padding-top:2px}.fml-select-wrapper .fml-option-wrapper .fml-option-item:last-child{border-bottom:none}.fml-select-wrapper .fml-option-wrapper .fml-option-item:hover{background-color:rgba(30,144,255,.6)}.fml-select-wrapper .fml-option-wrapper .fml-select-hover{background-color:rgba(30,144,255,.6);color:#fff !important}.fml-select-wrapper .fml-select-show{display:block}",""]),t.a=o},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r;(r=n(12)).keys().map(r)},function(e,t,n){var r={"./add.svg":13,"./arrow-down.svg":14,"./arrow-right.svg":15,"./divide.svg":16,"./function.svg":17,"./guanbi.svg":18,"./multiply.svg":19,"./plus.svg":20,"./reset.svg":21,"./sanjiao.svg":22,"./subtract.svg":23,"./xiangpica.svg":24};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=12},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=new o.a({id:"fml-icon-add",use:"fml-icon-add-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="fml-icon-add"><path d="M874.67 85.33a64 64 0 0164 64v725.34a64 64 0 01-64 64H149.33a64 64 0 01-64-64V149.33a64 64 0 0164-64h725.34zm0 64H149.33v725.34h725.34V149.33zM512 266.67a32 32 0 0131.85 28.92l.15 3.08V480h181.33a32 32 0 0131.85 28.93l.15 3.07a32 32 0 01-28.93 31.85l-3.07.15H544v181.33a32 32 0 01-63.85 3.07l-.15-3.07V544H298.67a32 32 0 01-31.85-28.93l-.15-3.07a32 32 0 0128.92-31.85l3.08-.15H480V298.67a32 32 0 0132-32z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=new o.a({id:"fml-icon-arrow-down",use:"fml-icon-arrow-down-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="fml-icon-arrow-down"><defs><style></style></defs><path d="M472.06 751.55L72.83 352.32a56.43 56.43 0 010-79.87 56.5 56.5 0 0179.87 0L512 631.75l359.3-359.3a56.5 56.5 0 0179.87 0 56.5 56.5 0 010 79.87L551.94 751.55a56.55 56.55 0 01-79.88 0z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=new o.a({id:"fml-icon-arrow-right",use:"fml-icon-arrow-right-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="fml-icon-arrow-right"><defs><style></style></defs><path d="M728.22 520.23a42.47 42.47 0 01-11.39 20.5L374.91 882.66a42.67 42.67 0 11-60.34-60.34l311.88-311.89L314.6 198.6a42.67 42.67 0 0160.34-60.34l341.93 341.92a42.64 42.64 0 0111.34 40.05z" fill="#323233" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=new o.a({id:"fml-icon-divide",use:"fml-icon-divide-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="fml-icon-divide"><defs><style></style></defs><path d="M230.34 568.35a56.33 56.33 0 01-48.8-28.17 56.36 56.36 0 010-56.36 56.33 56.33 0 0148.8-28.17h563.32a56.33 56.33 0 0148.8 28.17 56.36 56.36 0 010 56.36 56.33 56.33 0 01-48.8 28.17H230.34zM512 357.05c-46.67 0-84.5-37.85-84.5-84.53a84.51 84.51 0 11169 0 84.5 84.5 0 01-84.5 84.52zM512 836a84.51 84.51 0 01-84.5-84.52 84.5 84.5 0 11169 0A84.51 84.51 0 01512 836z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=new o.a({id:"fml-icon-function",use:"fml-icon-function-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="fml-icon-function"><defs><style></style></defs><path d="M555.15 18.54A151.75 151.75 0 01725.72 35.8a197.53 197.53 0 0123.94 23.26c23.55 26.72 36.38 56.03 39.2 89.57a58.68 58.68 0 01-15.6 46.33 57.96 57.96 0 01-46.76 17.55c-15.8-.83-27.84-9.26-36.82-25.7-3.56-6.58-6.48-13.4-9.55-20.33a312.76 312.76 0 00-7.32-15.95c-11.5-22.57-24.28-33.15-42.52-35.1-10.92-1.66-18.87 3.65-26.43 9.31a43.54 43.54 0 01-3.26 2.15 23.55 23.55 0 00-3.22 2.29c-10.58 9.4-19.8 20.96-28.14 35.35a326.46 326.46 0 00-19.45 41.79A467.09 467.09 0 00537 242.99a705.7 705.7 0 00-18.09 75.67 1491.42 1491.42 0 00-6.83 38.67c-1.02 6.05-.19 8.05.35 8.78.44.49 2.1 1.7 8.04 1.8 17.56.2 34.87.2 52.57.2h30.03a73.14 73.14 0 0119.22 2.44 55.51 55.51 0 0138.23 35.15 57.72 57.72 0 01-1.18 43.8l-3.4 6.53a52.76 52.76 0 01-28.49 22.91c-10.92 3.66-22.86 4.34-30.86 4.59-24.87.53-49.74.63-74.66.73l-17.9.05c-2.43 0-4.14.48-5.16 1.46-1.02.98-1.75 2.88-2.2 5.66l-3.31 23.8c-3.07 22.62-6.39 45.83-10.97 68.65A3709.53 3709.53 0 01445.54 752a474.7 474.7 0 01-64.71 147.36 271.4 271.4 0 01-46.23 54.9 171.97 171.97 0 01-62.8 36.23 143.07 143.07 0 01-84.46 1.02 185 185 0 01-27.06-10.09c-19.75-9.12-37.74-22.43-58.7-43.25a159.55 159.55 0 00-5.71-5.51c-4-3.75-7.95-7.46-11.46-11.56-11.07-12.87-14.14-30.72-8.44-49 2.44-7.9 5.76-14.53 10.14-20.34 12.88-17.26 28.72-25.4 44.77-23.7a46.2 46.2 0 0117.21 5.56c10.24 5.37 19.8 11.9 26.87 16.93l8.58 6.09c5.6 4 11.17 8 16.87 11.9 29.36 19.7 47.5 17.9 72.07-7.66 17.21-17.94 31.45-40.66 44.86-71.34 3.9-8.77 7.51-17.74 11.07-26.67 22.97-59.34 34.91-121.27 42.72-168.52 3.4-20.77 6.38-41.5 9.46-62.32l5.65-38.22c.59-3.8.34-6.59-.63-7.8-1.32-1.62-4.73-1.96-7.32-1.96a7108.46 7108.46 0 01-88.74-.73c-25.6-.34-46.37-14.77-54.27-37.64a65.73 65.73 0 01-3.22-24.38c.34-6.78 2-13.46 4.97-19.6a57.04 57.04 0 0128.58-27.7 60.23 60.23 0 0120.67-5.12c7.12-.49 14.43-.34 21.6-.2l6.34.1 16.19-.1 60.46-.58a38.03 38.03 0 007.46-.59c2.3-.48 3.17-1.02 4.15-3.9a43.79 43.79 0 001.9-7.5c2.24-12.34 4.39-24.58 6.49-36.82 5.16-31.7 11.45-63.2 18.87-94.4 3.8-16 8-30.53 12.77-44.43a452.96 452.96 0 0116.58-42.8c13.46-29.75 29.2-55.65 48.28-79.25a157.01 157.01 0 0147.78-39.88zM867.62 571.2c17.45-22.33 42.08-26.23 64.31-10.48 20.43 14.63 24.92 42.37 10.49 64.6a8642.32 8642.32 0 01-64.03 96.65l-18.72 28.19c-10.58 15.9-10.58 15.9.05 31.89l.24.29 16.58 24.87c21.45 32.28 42.9 64.5 64.07 96.98 9.27 14.14 12.2 29.65 8.05 43.6a46.47 46.47 0 01-26.92 29.25 43.69 43.69 0 01-17.31 3.7 46.81 46.81 0 01-38.33-21.54c-14.92-21.7-29.45-43.7-44.03-65.54l-21.94-32.82a30.09 30.09 0 00-5.27-6.34c-1.8-1.56-2-1.46-3.5-.14a30.28 30.28 0 00-5.08 6.34l-60.12 90.45c-10.92 16.48-20.29 24.48-32.28 27.7a50.52 50.52 0 01-12.78 1.65 44.52 44.52 0 01-39.5-23.99c-9.5-16.43-8.43-33.54 3.13-51l25.2-37.89c19.66-29.6 39.26-59.3 59.35-88.65 6.73-9.75 6.73-15.99 0-25.6a6650.98 6650.98 0 01-83.14-124.53c-10.04-15.31-12.87-31.6-7.9-46.18 4.63-13.65 15.8-24.14 31.45-29.4 18.87-6.25 39.4 2.68 52.9 22.67 12.2 18.1 24.15 36.33 36.19 54.47l20.14 30.47c2.73 4.15 5.5 8.3 8.34 12.34 3.12 4.39 5.16 5.51 6 5.51.68 0 2.63-1.07 5.46-5.22 9.75-14.29 19.2-28.77 28.76-43.2l22.48-33.89c5.61-8.39 11.41-17.07 17.66-25.21z" fill="#1890FF" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=new o.a({id:"fml-icon-guanbi",use:"fml-icon-guanbi-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="fml-icon-guanbi"><path d="M512 960C264.96 960 64 759.04 64 512S264.96 64 512 64s448 200.96 448 448-200.96 448-448 448zm0-831.71c-211.58 0-383.71 172.13-383.71 383.71 0 211.55 172.13 383.71 383.71 383.71 211.55 0 383.71-172.16 383.71-383.71 0-211.58-172.16-383.71-383.71-383.71zm45.05 385.09L695.42 376.5a32 32 0 10-44.99-45.5L511.87 468.03 375.42 331.17a31.96 31.96 0 00-45.25-.07 32 32 0 00-.06 45.25l136.26 136.67-137.38 135.9a32 32 0 00-.26 45.26 31.89 31.89 0 0022.75 9.5 32 32 0 0022.5-9.25l137.57-136.06L650.24 697.5a31.83 31.83 0 0022.65 9.4 31.94 31.94 0 0022.6-9.34 32 32 0 00.06-45.25l-138.5-138.94z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=new o.a({id:"fml-icon-multiply",use:"fml-icon-multiply-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="fml-icon-multiply"><defs><style></style></defs><path d="M706.57 234.57l-474 474a60 60 0 1084.86 84.86l474-474a60 60 0 10-84.86-84.86z" /><path d="M791.43 708.57l-474-474a60 60 0 10-84.86 84.86l474 474a60 60 0 1084.86-84.86z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=new o.a({id:"fml-icon-plus",use:"fml-icon-plus-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="fml-icon-plus"><defs><style></style></defs><path d="M512 912.03c-26.5 0-48-21.5-48-48v-704a48.01 48.01 0 0196 0v704c0 26.5-21.5 48-48 48z" /><path d="M864 560.03H160a48.01 48.01 0 010-96h704a48.01 48.01 0 010 96z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=new o.a({id:"fml-icon-reset",use:"fml-icon-reset-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="fml-icon-reset"><defs><style></style></defs><path d="M162.7 560.4c-14.6 0-28.3-5.7-38.6-16L76 496.3a33.8 33.8 0 1147.8-47.8l39 39 38.8-38.8a33.8 33.8 0 1147.8 47.8l-47.9 47.9a54.7 54.7 0 01-38.8 16c.1 0 0 0 0 0z" /><path d="M154 545.1c-18.6 0-33.8-15.1-33.8-33.8 0-216.9 176.4-393.3 393.3-393.3 112.7 0 220.2 48.5 294.9 133.1 12.4 14 11 35.3-3 47.7-14 12.3-35.3 11-47.7-3a325.51 325.51 0 00-244.2-110.3c-179.6 0-325.8 146.1-325.8 325.8.1 18.7-15 33.8-33.7 33.8zm359.5 359.5c-117.1 0-227.2-51.6-302.3-141.6-11.9-14.3-10-35.6 4.3-47.6s35.6-10 47.6 4.3A325.05 325.05 0 00513.5 837c179.6 0 325.8-146.1 325.8-325.8 0-18.6 15.1-33.8 33.8-33.8 18.6 0 33.8 15.1 33.8 33.8 0 217-176.5 393.4-393.4 393.4z" /><path d="M927.2 584c-8.6 0-17.3-3.3-23.9-9.9l-39-39-38.8 38.8a33.8 33.8 0 11-47.8-47.8l47.9-47.9c10.3-10.3 24-16 38.6-16 14.6 0 28.3 5.7 38.6 16l48.1 48.1a33.8 33.8 0 010 47.8c-6.4 6.6-15 9.9-23.7 9.9z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=new o.a({id:"fml-icon-sanjiao",use:"fml-icon-sanjiao-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="fml-icon-sanjiao"><path d="M234.89 377.48l279.65 279.65 278.81-278.8z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=new o.a({id:"fml-icon-subtract",use:"fml-icon-subtract-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="fml-icon-subtract"><defs><style></style></defs><path d="M883.1 557.2H141.5a44.9 44.9 0 110-89.8H883a44.9 44.9 0 0144.9 44.9c.1 24.7-20 44.9-44.8 44.9z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=new o.a({id:"fml-icon-xiangpica",use:"fml-icon-xiangpica-usage",viewBox:"0 0 1076 1024",content:'<symbol class="icon" viewBox="0 0 1076 1024" xmlns="http://www.w3.org/2000/svg" id="fml-icon-xiangpica"><defs><style></style></defs><path d="M976.07 506.37L646.26 836.18c-1.74 1.74-3.79 2.82-5.48 4.5L216.41 416.32 551.2 81.49c40.19-40.19 105.16-40.29 145.04-.4l280.25 280.24c40.08 40.09 40.03 104.6-.41 145.04M221.33 836.23L81.26 696.11c-40.1-40.1-40.1-104.6.4-145.04l98.56-98.56L600.9 873.2c-116.78 78.34-276.51 66.1-379.57-36.96m791.34-511.1L732.42 44.9c-59.9-59.9-157.27-59.75-217.43.4L45.42 514.88C-15.15 575.44-14.9 672.35 45 732.3l140.12 140.13c137.06 137.05 359.97 137.3 497.33-.05l329.8-329.81c60.62-60.57 60.36-157.48.41-217.43" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(4),a={insert:"head",singleton:!1},s=(o()(i.a,a),i.a.locals,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._l(e.formula,(function(t){return["function"!==t.token&&"arithmetic_token"!==t.token?[n("param-item",{key:t.id,attrs:{field:t,currentToken:e.currentToken,parent:e.parent},on:{handleTokenItem:e.handleTokenItem,handleDeleteToken:e.handleDeleteToken,handleResetToken:e.handleResetToken,handleEmptyValue:e.handleEmptyValue}})]:e._e(),e._v(" "),"arithmetic_token"===t.token?[n("arith-item",{key:"arith"+t.id,attrs:{formula:[t.params[0]],currentToken:e.currentToken,funcTokens:e.funcTokens,parent:t,self:t,currentOperatorId:e.currentOperatorId},on:{handleAddEmptyToken:e.handleAddEmptyToken,handleFuncTokenItem:e.handleFuncTokenItem,handleTokenItem:e.handleTokenItem,handleDeleteToken:e.handleDeleteToken,handleResetToken:e.handleResetToken,handleEmptyValue:e.handleEmptyValue,mouseleaveOperator:e.mouseleaveOperator,mouseoverOperator:e.mouseoverOperator}})]:e._e(),e._v(" "),"function"===t.token?n("span",{key:t.id,class:["fml-token fml-function fml-relative",e.currentToken.id===t.id?"active":""]},[e.currentToken.id===t.id&&("arithmetic_token"!==e.parent.token&&e.parent.params&&e.parent.params.length>e.parent.minParameterLength||e.parent.isTop)?n("span",{staticClass:"fml-formula-delete fml-parent-delete"},[n("svg",{staticClass:"fml-svg-icon",on:{click:function(n){return e.handleDeleteToken({parent:e.parent,child:t})}}},[n("use",{attrs:{"xlink:href":"#fml-icon-guanbi"}})])]):e._e(),e._v(" "),e.currentToken.id===t.id&&"arithmetic_token"!==e.parent.token&&e.parent.params?n("span",{staticClass:"fml-formula-reset fml-parent-delete"},[n("svg",{staticClass:"fml-svg-icon",on:{click:function(n){return e.handleResetToken({parent:e.parent,child:t})}}},[n("use",{attrs:{"xlink:href":"#fml-icon-reset"}})])]):e._e(),e._v(" "),"function"===t.token?n("span",{staticClass:"fml-function-name",on:{click:function(n){return e.handleFuncTokenItem({ev:n,obj:t})}}},[e._v(e._s(t.name))]):e._e(),e._v(" "),"function"===t.token?n("span",{class:e.operatorClass(t),on:{mouseleave:function(n){return e.mouseleaveOperator(t)},mouseover:function(n){return e.mouseoverOperator(t)}}},[e._v("(\n      ")]):e._e(),e._v(" "),e._l(t.params,(function(r,o){return[e.parameterTokens.includes(r.token)?[n("param-item",{key:r.id,attrs:{field:r,"current-token":e.currentToken,"field-idx":o,parent:t},on:{handleTokenItem:e.handleTokenItem,handleDeleteToken:e.handleDeleteToken,handleResetToken:e.handleResetToken,handleEmptyValue:e.handleEmptyValue}})]:"arithmetic_token"===r.token?[n("arith-item",{key:"arith"+r.id,attrs:{formula:[r.params[0]],currentToken:e.currentToken,funcTokens:e.funcTokens,parent:t,self:r,currentOperatorId:e.currentOperatorId},on:{handleAddEmptyToken:e.handleAddEmptyToken,handleFuncTokenItem:e.handleFuncTokenItem,handleTokenItem:e.handleTokenItem,handleDeleteToken:e.handleDeleteToken,handleResetToken:e.handleResetToken,handleEmptyValue:e.handleEmptyValue,mouseleaveOperator:e.mouseleaveOperator,mouseoverOperator:e.mouseoverOperator}})]:"function"===r.token?[n("formula-item",{key:r.id,attrs:{formula:[r],currentToken:e.currentToken,funcTokens:e.funcTokens,parent:t,currentOperatorId:e.currentOperatorId},on:{handleAddEmptyToken:e.handleAddEmptyToken,handleFuncTokenItem:e.handleFuncTokenItem,handleTokenItem:e.handleTokenItem,handleDeleteToken:e.handleDeleteToken,handleResetToken:e.handleResetToken,handleEmptyValue:e.handleEmptyValue,mouseleaveOperator:e.mouseleaveOperator,mouseoverOperator:e.mouseoverOperator}})]:e._e(),e._v(" "),o!==t.params.length-1?n("span",{key:"comma"+r.id,staticClass:"fml-function-comma"},[e._v(",")]):e._e()]})),e._v(" "),"function"===t.token&&(!t.limitParameterLength||t.params.length<t.minParameterLength)?n("span",{staticClass:"fml-formula-add"},[n("span",{staticClass:"fml-field-line"}),e._v(" "),n("svg",{staticClass:"fml-svg-icon",on:{click:function(n){return e.handleAddEmptyToken(t)}}},[n("use",{attrs:{"xlink:href":"#fml-icon-add"}})])]):e._e(),e._v(" "),"function"===t.token?n("span",{class:e.operatorClass(t),on:{mouseleave:function(n){return e.mouseleaveOperator(t)},mouseover:function(n){return e.mouseoverOperator(t)}}},[e._v(")\n      ")]):e._e()],2):e._e()]}))],2)});function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}s._withStripped=!0;var f=["empty","field","input","const_token"],p={token:"empty",value:null},d="field",m={token:"input",value:null},h={PI:{token:"const_token",value:"PI"},e:{token:"const_token",value:"e"}},g=[{token:"operator_token",value:"plus",operator:"+"},{token:"operator_token",value:"subtract",operator:"-"},{token:"operator_token",value:"multiply",operator:"*"},{token:"operator_token",value:"divide",operator:"/"},{token:"operator_token",value:"power",operator:"**"}],v={token:"function",name:"",desc:"",placeholder:[],params:[],minParameterLength:null,limitParameterLength:!1},y={token:"arithmetic_token",operator:null,params:[u({},p),u({},p)],newPlaceholder:"number",minParameterLength:2,limitParameterLength:!0},b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"fml-relative"},[n("span",{class:["fml-token fml-relative",e.currentToken.id===e.field.id?e.activeColor:"",e.field.value?"":"fml-empty","field"===e.field.token?"fml-field":"input"===e.field.token?"fml-input":"const"===e.field.token?"fml-const":""],on:{click:function(t){return t.stopPropagation(),e.handleTokenItem(e.field)}}},[[e._v("\n      "+e._s(e.field.value)+"\n      "),e.field.value?e._e():n("span",{staticClass:"fml-token-placeholder",class:[e.parent.placeholder&&e.parent.placeholder[e.fieldIdx]?"":"fml-token-min-space"]},[e._v(e._s(e.parent.placeholder&&e.parent.placeholder[e.fieldIdx]||"?"))]),e._v(" "),e.currentToken.id===e.field.id&&e.parent.params&&e.parent.params.length>e.parent.minParameterLength&&"arithmetic_token"!==e.parent.token?n("span",{staticClass:"fml-formula-delete"},[n("svg",{staticClass:"fml-svg-icon",on:{click:function(t){return t.stopPropagation(),e.handleDeleteToken({parent:e.parent,child:e.field})}}},[n("use",{attrs:{"xlink:href":"#fml-icon-guanbi"}})])]):e._e(),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.currentToken.id===e.field.id,expression:"currentToken.id === field.id"}],staticClass:"fml-formula-reset"},[n("svg",{staticClass:"fml-svg-icon",on:{click:function(t){return t.stopPropagation(),e.handleResetToken({parent:e.parent,child:e.field})}}},[n("use",{attrs:{"xlink:href":"#fml-icon-reset"}})])])]],2)])};function k(e,t,n,r,o,i,a,s){var l,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=l):o&&(l=s?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(e,t){return l.call(t),c(e,t)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,l):[l]}return{exports:e,options:u}}b._withStripped=!0;var w=k({name:"param-item",props:{field:{type:Object,default:function(){}},currentToken:{type:Object,default:function(){}},parent:{type:Object,default:function(){}},fieldIdx:{type:Number}},computed:{activeColor:function(){return this.parent.token,"active"}},methods:{handleDeleteToken:function(e){this.$emit("handleDeleteToken",e)},handleResetToken:function(e){this.$emit("handleResetToken",e)},handleTokenItem:function(e){this.$emit("handleTokenItem",e)},handleEmptyValue:function(e){this.$emit("handleEmptyValue",e)}}},b,[],!1,null,"17a6e340",null);w.options.__file="src/packages/formula/src/param-item.vue";var x=w.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{class:["fml-token fml-arith fml-relative ",e.currentToken.id===e.self.id?"active":""],on:{dblclick:function(t){return t.stopPropagation(),e.handleTokenItem(e.self)}}},[e.parent.isArithTop?e._e():n("span",{class:e.operatorClass(e.self),on:{mouseleave:function(t){return e.mouseleaveOperator(e.self)},mouseover:function(t){return e.mouseoverOperator(e.self)}}},[e._v("(\n  ")]),e._v(" "),n("formula-item",{key:"arith"+e.self.id+1,attrs:{formula:[e.self.params[0]],currentToken:e.currentToken,funcTokens:e.funcTokens,parent:e.self,currentOperatorId:e.currentOperatorId},on:{handleAddEmptyToken:e.handleAddEmptyToken,handleFuncTokenItem:e.handleFuncTokenItem,handleTokenItem:e.handleTokenItem,handleDeleteToken:e.handleDeleteToken,handleResetToken:e.handleResetToken,handleEmptyValue:e.handleEmptyValue,mouseleaveOperator:e.mouseleaveOperator,mouseoverOperator:e.mouseoverOperator}}),e._v(" "),n("span",{key:"arith"+e.self.id+2,staticClass:"fml-arith-operator"},[n("span",{class:[["**","*"].includes(e.self.operator)?"vertical-sub":""]},[e._v(e._s(e.self.operator))])]),e._v(" "),n("formula-item",{key:"arith"+e.self.id+3,attrs:{formula:[e.self.params[1]],currentToken:e.currentToken,funcTokens:e.funcTokens,parent:e.self,currentOperatorId:e.currentOperatorId},on:{handleAddEmptyToken:e.handleAddEmptyToken,handleFuncTokenItem:e.handleFuncTokenItem,handleTokenItem:e.handleTokenItem,handleDeleteToken:e.handleDeleteToken,handleResetToken:e.handleResetToken,handleEmptyValue:e.handleEmptyValue,mouseleaveOperator:e.mouseleaveOperator,mouseoverOperator:e.mouseoverOperator}}),e._v(" "),e.parent.isArithTop?e._e():n("span",{class:e.operatorClass(e.self),on:{mouseleave:function(t){return e.mouseleaveOperator(e.self)},mouseover:function(t){return e.mouseoverOperator(e.self)}}},[e._v(")\n  ")]),e._v(" "),e.currentToken.id===e.self.id&&"arithmetic_token"===e.self.token&&"arithmetic_token"!==e.parent.token&&e.parent.params&&e.parent.params.length>e.parent.minParameterLength?n("span",{staticClass:"fml-formula-delete"},[n("svg",{staticClass:"fml-svg-icon",on:{click:function(t){return t.stopPropagation(),e.handleDeleteToken({parent:e.parent,child:e.self})}}},[n("use",{attrs:{"xlink:href":"#fml-icon-guanbi"}})])]):e._e(),e._v(" "),e.currentToken.id!==e.self.id||"arithmetic_token"!==e.self.token||e.parent.isArithTop?e._e():n("span",{staticClass:"fml-formula-reset"},[n("svg",{staticClass:"fml-svg-icon",on:{click:function(t){return t.stopPropagation(),e.handleResetToken({parent:e.parent,child:e.self})}}},[n("use",{attrs:{"xlink:href":"#fml-icon-reset"}})])])],1)};T._withStripped=!0;var O=k({name:"arithmetic-item",props:{formula:{type:Array,default:function(){return[]}},currentToken:{type:Object,default:function(){}},funcTokens:{type:Array,default:function(){return[]}},self:{type:Object,default:function(){}},parent:{type:Object,default:function(){}},currentOperatorId:{type:Number|String,default:""}},computed:{operatorClass:function(){return function(e){return e.uniqueId===this.currentOperatorId?"fml-arith-bracket active":"fml-arith-bracket"}}},methods:{handleAddEmptyToken:function(e){this.$emit("handleAddEmptyToken",e)},handleFuncTokenItem:function(e){this.$emit("handleFuncTokenItem",e)},handleDeleteToken:function(e){this.$emit("handleDeleteToken",e)},handleResetToken:function(e){this.$emit("handleResetToken",e)},handleTokenItem:function(e){this.$emit("handleTokenItem",e)},handleEmptyValue:function(e){this.$emit("handleEmptyValue",e)},mouseleaveOperator:function(e){this.$emit("mouseleaveOperator",e)},mouseoverOperator:function(e){this.$emit("mouseoverOperator",e)}}},T,[],!1,null,"2d427539",null);O.options.__file="src/packages/formula/src/arithmetic-item.vue";var _=k({inheritAttrs:!1,name:"formula-item",components:{ParamItem:x,ArithItem:O.exports},data:function(){return{parameterTokens:f}},props:{formula:{type:Array,default:function(){return[]}},currentToken:{type:Object,default:function(){}},funcTokens:{type:Array,default:function(){return[]}},parent:{type:Object},currentOperatorId:{type:Number|String,default:""}},computed:{operatorClass:function(){return function(e){return e.uniqueId===this.currentOperatorId?"fml-function-bracket active":"fml-function-bracket"}}},methods:{handleAddEmptyToken:function(e){this.$emit("handleAddEmptyToken",e)},handleFuncTokenItem:function(e){this.$emit("handleFuncTokenItem",e)},handleDeleteToken:function(e){this.$emit("handleDeleteToken",e)},handleResetToken:function(e){this.$emit("handleResetToken",e)},handleTokenItem:function(e){this.$emit("handleTokenItem",e)},handleEmptyValue:function(e){this.$emit("handleEmptyValue",e)},mouseleaveOperator:function(e){this.$emit("mouseleaveOperator",e)},mouseoverOperator:function(e){this.$emit("mouseoverOperator",e)}}},s,[],!1,null,null,null);_.options.__file="src/packages/formula/src/formula-item.vue";var S=_.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fml-flex fml-container"},[n("div",{staticClass:"fml-flex",style:{width:e.width}},[n("div",{staticClass:"fml-left"},[n("div",{staticClass:"fml-flex fml-jsb  fml-mb-12"},[n("div",{staticClass:"fml-buttons fml-flex fml-flex-wrap"},[n("span",{staticClass:"fml-title"},[e._v(e._s(e.translate.arithmetic))]),e._v(" "),e._l(e.operatorTokens,(function(t,r){return n("div",{key:r,staticClass:"fml-buttons-item fml-operator-button",on:{click:function(n){return e.handleAddArithToken(t)}}},[n("span",{class:[["**","*"].includes(t.operator)?"vertical-middle":""]},[e._v(e._s(t.operator))])])}))],2),e._v(" "),n("formula-input",{attrs:{type:"text",placeholder:e.translate.inputPlaceholder,disabled:e.prohibitInput},on:{keyupEnter:e.handleKeyupEnter},model:{value:e.iptValue,callback:function(t){e.iptValue=t},expression:"iptValue"}})],1),e._v(" "),e.enableConst?n("div",{staticClass:"fml-buttons fml-flex fml-flex-wrap"},e._l(e.constTokens,(function(t,r){return n("div",{key:r,staticClass:"fml-buttons-item",on:{click:function(n){return e.setFieldValue(t)}}},[e._v("\n            "+e._s(t.name)+"\n          ")])})),0):e._e(),e._v(" "),n("div",[n("div",{staticClass:"fml-edit-container"},[n("formula-item",{attrs:{formula:e.formula,currentToken:e.currentToken,funcTokens:e.funcTokens,parent:{isTop:!0},currentOperatorId:e.currentOperatorId},on:{handleAddEmptyToken:e.handleAddEmptyToken,handleFuncTokenItem:e.handleFuncTokenItem,handleTokenItem:e.handleTokenItem,handleDeleteToken:e.handleDeleteToken,handleResetToken:e.handleResetToken,handleEmptyValue:e.handleEmptyValue,mouseleaveOperator:e.mouseleaveOperator,mouseoverOperator:e.mouseoverOperator}}),e._v(" "),e.formula.length<=0?n("span",{staticClass:"fml-tip"},[e._v(e._s(e.translate.emptyTip))]):e._e()],1)]),e._v(" "),n("div",{staticClass:"fml-flex fml-jsb fml-bottom"},[n("div",{staticClass:"fml-flex-1 fml-bottom-wrap"},[n("span",{staticClass:"fml-title fml-title-vertical"},[e._v(e._s(e.translate.formula))]),e._v(" "),n("ul",e._l(e.funcTokens,(function(t,r){return n("li",{key:r,staticClass:"fml-curpointer fml-functoken-item",on:{click:function(n){return e.handleAddFuncToken(t)},mouseover:function(n){return e.handleTriggerIntro(t)}}},[e._v(e._s(t.name))])})),0)]),e._v(" "),e.desc?n("div",{staticClass:"fml-desc"},[n("p",[e._v(" "+e._s(e.desc.intro))]),e._v(" "),n("p",[n("svg",{staticClass:"fml-svg-icon"},[n("use",{attrs:{"xlink:href":"#fml-icon-function"}})]),e._v("\n              "+e._s(e.desc.usage))]),e._v(" "),n("p",{staticClass:"fml-flex fml-direction-column"},e._l(e.desc.parameters,(function(t,r){return n("span",{key:r,staticClass:"fml-ml-12"},[e._v(e._s(r+1)+". "+e._s(t))])})),0)]):e._e()])]),e._v(" "),n("div",{staticClass:"fml-right"},[n("div",{staticClass:"fml-fields-container"},[n("span",{staticClass:"fml-title  fml-title-vertical"},[e._v(e._s(e.translate.fields))]),e._v(" "),e._t("loading"),e._v(" "),n("ul",e._l(e.fields,(function(t,r){return n("li",{key:r,staticClass:"fml-curpointer fml-text-primary fml-py-4",on:{click:function(n){return e.handleFieldItem(t)}}},[e._v(e._s(t.field))])})),0)],2)])])])};function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e){var t=Array.isArray(e)?[]:{};for(var n in e)e.hasOwnProperty(n)&&(e[n]&&"object"===P(e[n])?t[n]=I(e[n]):t[n]=e[n]);return t}function C(e,t){j(e,t)||(e.className+=" "+t)}function j(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)}function L(e,t){var n=new RegExp("\\b"+t+"\\b");e.className=e.className.replace(n,"")}function N(){this.id=1,this.uniqueId=1}E._withStripped=!0,N.prototype.deleteToken=function(e){!e.parent||e.parent.isTop||e.parent.isArithTop?(this.formula=[],this.currentToken={}):(this.deleteMethod(this.formula,e.child.uniqueId,e.parent),this.findNext()),this.emitTokenUpdated()},N.prototype.resetToken=function(e){if(!e.parent||e.parent.isTop)return this.formula=[],this.currentToken={},void this.emitTokenUpdated();if(e.parent&&"arithmetic_token"===e.child.token&&"arithmetic_token"===e.parent.token){var t=this.findTargetToken(this.formula,e.parent.parentUniqueId,"uniqueId");return t&&this.resetMethod(this.formula,e.parent.uniqueId,t),this.findNext(),void this.emitTokenUpdated()}this.resetMethod(this.formula,e.child.uniqueId,e.parent),this.updateId(this.formula),this.findNext(),this.emitTokenUpdated()},N.prototype.resetMethod=function(e,t,n){var r=this;this.id++,this.uniqueId++,e.forEach((function(e,o){e.uniqueId===t&&n.params.splice(o,1,{token:"empty",value:null,id:r.id,level:n.level+1,parentLevel:n.level,parentId:n.id,uniqueId:r.uniqueId,parentUniqueId:n.uniqueId,placeholder:r.resetPlaceholder(n)}),e.params&&e.params.length>0&&r.resetMethod(e.params,t,n)}))},N.prototype.deleteMethod=function(e,t,n){var r=this;e.forEach((function(e,o){e.uniqueId===t&&(n.params.splice(o,1),r.resetPlaceholder(n)),e.params&&e.params.length>0&&r.deleteMethod(e.params,t,n)}))},N.prototype.emptyValue=function(e){var t=e.child;t.value="",this.currentToken=t,this.emitTokenUpdated()},N.prototype.updateId=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e.forEach((function(e){e.level=n,e.parentLevel=n-1,e.parentId=r,e.id=t.id,e.uniqueId=e.uniqueId?e.uniqueId:t.uniqueId,e.parentUniqueId=o,t.id++,t.uniqueId++,e.params&&e.params.length>0&&t.updateId(e.params,n+1,t.id-1,e.uniqueId)}))},N.prototype.modifyValue=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0===this.formula.length)this.formula.push({token:e.token,value:e.value}),this.updateId(this.formula),this.currentToken=this.formula[0],this.emitTokenUpdated();else{if(!this.currentToken)return;if(this.currentToken.id<0)return;var n=this.findTargetToken(this.formula,this.currentToken.uniqueId,"uniqueId");if(!n)return;if(!f.includes(n.token))return;n.value=e.value,n.token=e.value?e.token:"empty"}t&&this.findNext(),this.emitTokenUpdated()},N.prototype.emitTokenUpdated=function(){this.Bus.$emit("update",{formula:this.formula,currentToken:this.currentToken})},N.prototype.setCurrentToken=function(e){this.currentToken=e,this.emitTokenUpdated()},N.prototype.findTargetToken=function(e,t,n){var r=null;return function e(t,n,o){t.forEach((function(t){t[o]===n&&(r=t),t.params&&t.params.length>0&&e(t.params,n,o)}))}(e,t,n),r},N.prototype.findNext=function(){var e=this;this.emptyTokenId=[];var t=function t(n){return n.forEach((function(n){n.params&&n.params.length>0&&t(n.params),!n.value&&f.includes(n.token)&&e.emptyTokenId.push(n.id)})),e.emptyTokenId.sort((function(e,t){return e-t})),e.emptyTokenId[0]}(this.formula);return!!t&&(this.currentToken=this.findTargetToken(this.formula,t,"id"),!0)};var F=N;function A(){}A.prototype.wrapFuncToken=function(e){if(this.currentToken&&this.currentToken.token)this.mergeFuncToken(this.currentToken,e.name),this.emitTokenUpdated();else if(!this.currentToken.token&&this.formula.length>0);else{var t=[e];this.updateId(t),this.formula=I(t),this.currentToken=this.formula[0].params[0],this.findNext(),this.emitTokenUpdated()}},A.prototype.mergeFuncToken=function(e,t){var n=this,r=null;if(this.funcTokens.map((function(e){e.name===t&&(r=I(e))})),r){var o=null,i=this.findTargetToken(this.formula,e.parentUniqueId,"uniqueId");if(i){var a=i.params.findIndex((function(e){return e.uniqueId===n.currentToken.uniqueId}));if(a<0)return;o=this.mergeFuncParams(r),i.params.splice(a,1,o)}else 0===this.currentToken.parentId&&(o=this.mergeFuncParams(r),this.formula=[o]);this.updateId(this.formula),o&&(this.currentToken=o.params[0]),this.findNext()}},A.prototype.mergeFuncParams=function(e){var t=I(this.currentToken);return e.params.splice(0,1,t),e},A.prototype.addEmptyToken=function(e){var t=this.findTargetToken(this.formula,e.uniqueId,"uniqueId");t&&(this.addMethod(this.formula,e.uniqueId,t),this.findNext(),this.emitTokenUpdated())},A.prototype.addMethod=function(e,t,n){this.id++,this.uniqueId++,n.params.push({token:"empty",value:null,id:this.id,level:n.level+1,parentLevel:n.level,parentId:n.id,uniqueId:this.uniqueId,parentUniqueId:n.uniqueId});var r="";n&&n.placeholder&&("number"===n.extra.newPlaceholder?(r="number"+n.params.length,n.placeholder.push(r)):(r=n.extra.newPlaceholder||"",n.placeholder.push(r))),this.updateId(this.formula),this.currentToken=this.findTargetToken(e,this.uniqueId,"uniqueId")},A.prototype.setFuncIntro=function(e){this.formulaIntro=e.desc,this.emitFuncIntro()},A.prototype.emitFuncIntro=function(){this.Bus.$emit("updateIntro",{intro:this.formulaIntro})};var R=A,V={CommonFunctions:[{name:"EXP",desc:{intro:"返回 e 的 n 次方",usage:"EXP(number)",parameters:["Number: 指数。常数 e 等于 2.71828182845904，是自然对数的底"]},params:["number"],limitParameterLength:!0},{name:"LOG",desc:{intro:"根据给定底数返回数字的对数",usage:"LOG(number,base)",parameters:["Number: 要取其对数的正实数","Base: 计算对数时所使用的底数"]},params:["number","base"],limitParameterLength:!0},{name:"POWER",desc:{intro:"返回某数的乘幂",usage:"POWER(number,power)",parameters:["Number: 底数，任何实数","Power: 幂值"]},params:["number","power"],limitParameterLength:!0},{name:"SQRT",desc:{intro:"返回数值的平方根",usage:"SQRT(number)",parameters:["Number: 要对其求平方根的数值"]},params:["number"],limitParameterLength:!0}],Aggregate:[{name:"SUM",desc:{intro:"返回一组数值的总和",usage:"SUM(number1, number2, ...)",parameters:["number1: 第一个参数","number2: 第二个参数"]},params:["number1","number2"],newPlaceholder:"number",limitParameterLength:!1},{name:"PRODUCT",desc:{intro:"计算所有参数的乘积",usage:"PRODUCT(number1,number2,...)",parameters:["number1: 第一个参数","number2: 第二个参数"]},params:["number1","number2"],newPlaceholder:"number",limitParameterLength:!1},{name:"AVERAGE",desc:{intro:"返回其参数的算术平均值",usage:"AVERAGE(number1,number2,...)",parameters:["number1: 第一个参数","number2: 第二个参数"]},params:["number1","number2"],newPlaceholder:"number",limitParameterLength:!1},{name:"COUNT",desc:{intro:"COUNT函数可以获取参数的数量",usage:"COUNT(number1,number2,...)",parameters:["number1: 第一个参数","number2: 第二个参数"]},params:["number1","number2"],newPlaceholder:"number",limitParameterLength:!1}],Trigonometric:[]};function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){D(e,t,n[t])}))}return e}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t&&B(e.prototype,t),n&&B(e,n),e}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?$(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}var J={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},Y=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};q(this,e),this.init(t,n)}return z(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||J,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,U({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),X=function(){function e(){q(this,e),this.observers={}}return z(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){var o=[].concat(this.observers[e]);o.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var i=[].concat(this.observers["*"]);i.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function Q(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function Z(e){return null==e?"":""+e}function ee(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function te(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function o(){return!e||"string"==typeof e}for(var i="string"!=typeof t?[].concat(t):t.split(".");i.length>1;){if(o())return{};var a=r(i.shift());!e[a]&&n&&(e[a]=new n),e=Object.prototype.hasOwnProperty.call(e,a)?e[a]:{}}return o()?{}:{obj:e,k:r(i.shift())}}function ne(e,t,n){var r=te(e,t,Object);r.obj[r.k]=n}function re(e,t){var n=te(e,t),r=n.obj,o=n.k;if(r)return r[o]}function oe(e,t,n){var r=re(e,n);return void 0!==r?r:re(t,n)}function ie(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):ie(e[r],t[r],n):e[r]=t[r]);return e}function ae(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var se={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function le(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return se[e]})):e}var ue="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,ce=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return q(this,t),n=H(this,W(t).call(this)),ue&&X.call($(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return G(t,e),z(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,i=[e,t];return n&&"string"!=typeof n&&(i=i.concat(n)),n&&"string"==typeof n&&(i=i.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(i=e.split(".")),re(this.data,i)}},{key:"addResource",value:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},i=this.options.keySeparator;void 0===i&&(i=".");var a=[e,t];n&&(a=a.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(r=t,t=(a=e.split("."))[1]),this.addNamespaces(t),ne(this.data,a,r),o.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var o in n)"string"!=typeof n[o]&&"[object Array]"!==Object.prototype.toString.apply(n[o])||this.addResource(e,t,o,n[o],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(a=e.split("."))[1]),this.addNamespaces(t);var s=re(this.data,a)||{};r?ie(s,n,o):s=U({},s,n),ne(this.data,a,s),i.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?U({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(X),fe={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,o){var i=this;return e.forEach((function(e){i.processors[e]&&(t=i.processors[e].process(t,n,r,o))})),t}},pe={},de=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return q(this,t),n=H(this,W(t).call(this)),ue&&X.call($(n)),ee(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,$(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=Y.create("translator"),n}return G(t,e),z(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,o=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var i=e.match(this.interpolator.nestingRegexp);if(i&&i.length>0)return{key:e,namespaces:o};var a=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(a[0])>-1)&&(o=a.shift()),e=a.join(r)}return"string"==typeof o&&(o=[o]),{key:e,namespaces:o}}},{key:"translate",value:function(e,n,r){var o=this;if("object"!==M(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var i=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,a=this.extractFromKey(e[e.length-1],n),s=a.key,l=a.namespaces,u=l[l.length-1],c=n.lng||this.language,f=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&"cimode"===c.toLowerCase()){if(f){var p=n.nsSeparator||this.options.nsSeparator;return u+p+s}return s}var d=this.resolve(e,n),m=d&&d.res,h=d&&d.usedKey||s,g=d&&d.exactUsedKey||s,v=Object.prototype.toString.apply(m),y=["[object Number]","[object Function]","[object RegExp]"],b=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,w="string"!=typeof m&&"boolean"!=typeof m&&"number"!=typeof m;if(k&&m&&w&&y.indexOf(v)<0&&("string"!=typeof b||"[object Array]"!==v)){if(!n.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,m,n):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(i){var x="[object Array]"===v,T=x?[]:{},O=x?g:h;for(var _ in m)if(Object.prototype.hasOwnProperty.call(m,_)){var S="".concat(O).concat(i).concat(_);T[_]=this.translate(S,U({},n,{joinArrays:!1,ns:l})),T[_]===S&&(T[_]=m[_])}m=T}}else if(k&&"string"==typeof b&&"[object Array]"===v)(m=m.join(b))&&(m=this.extendTranslation(m,e,n,r));else{var E=!1,P=!1,I=void 0!==n.count&&"string"!=typeof n.count,C=t.hasDefaultValue(n),j=I?this.pluralResolver.getSuffix(c,n.count):"",L=n["defaultValue".concat(j)]||n.defaultValue;!this.isValidLookup(m)&&C&&(E=!0,m=L),this.isValidLookup(m)||(P=!0,m=s);var N=C&&L!==m&&this.options.updateMissing;if(P||E||N){if(this.logger.log(N?"updateKey":"missingKey",c,u,s,N?L:m),i){var F=this.resolve(s,U({},n,{keySeparator:!1}));F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var A=[],R=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&R&&R[0])for(var V=0;V<R.length;V++)A.push(R[V]);else"all"===this.options.saveMissingTo?A=this.languageUtils.toResolveHierarchy(n.lng||this.language):A.push(n.lng||this.language);var D=function(e,t,r){o.options.missingKeyHandler?o.options.missingKeyHandler(e,u,t,N?r:m,N,n):o.backendConnector&&o.backendConnector.saveMissing&&o.backendConnector.saveMissing(e,u,t,N?r:m,N,n),o.emit("missingKey",e,u,t,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&I?A.forEach((function(e){o.pluralResolver.getSuffixes(e).forEach((function(t){D([e],s+t,n["defaultValue".concat(t)]||L)}))})):D(A,s,L))}m=this.extendTranslation(m,e,n,d,r),P&&m===s&&this.options.appendNamespaceToMissingKey&&(m="".concat(u,":").concat(s)),P&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(m))}return m}},{key:"extendTranslation",value:function(e,t,n,r,o){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(U({},n,{interpolation:U({},this.options.interpolation,n.interpolation)}));var a,s=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(s){var l=e.match(this.interpolator.nestingRegexp);a=l&&l.length}var u=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(u=U({},this.options.interpolation.defaultVariables,u)),e=this.interpolator.interpolate(e,u,n.lng||this.language,n),s){var c=e.match(this.interpolator.nestingRegexp);a<(c&&c.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return o&&o[0]===r[0]&&!n.context?(i.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):i.translate.apply(i,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var f=n.postProcess||this.options.postProcess,p="string"==typeof f?[f]:f;return null!=e&&p&&p.length&&!1!==n.applyPostProcessor&&(e=fe.handle(p,e,t,this.options&&this.options.postProcessPassResolved?U({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,o,i,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!a.isValidLookup(t)){var l=a.extractFromKey(e,s),u=l.key;n=u;var c=l.namespaces;a.options.fallbackNS&&(c=c.concat(a.options.fallbackNS));var f=void 0!==s.count&&"string"!=typeof s.count,p=void 0!==s.context&&"string"==typeof s.context&&""!==s.context,d=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);c.forEach((function(e){a.isValidLookup(t)||(i=e,!pe["".concat(d[0],"-").concat(e)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(i)&&(pe["".concat(d[0],"-").concat(e)]=!0,a.logger.warn('key "'.concat(n,'" for languages "').concat(d.join(", "),'" won\'t get resolved as namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach((function(n){if(!a.isValidLookup(t)){o=n;var i,l,c=u,d=[c];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(d,u,n,e,s);else f&&(i=a.pluralResolver.getSuffix(n,s.count)),f&&p&&d.push(c+i),p&&d.push(c+="".concat(a.options.contextSeparator).concat(s.context)),f&&d.push(c+=i);for(;l=d.pop();)a.isValidLookup(t)||(r=l,t=a.getResource(n,e,l,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:o,usedNS:i}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&"defaultValue"===t.substring(0,"defaultValue".length)&&void 0!==e[t])return!0;return!1}}]),t}(X);function me(e){return e.charAt(0).toUpperCase()+e.slice(1)}var he=function(){function e(t){q(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Y.create("languageUtils")}return z(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=me(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=me(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=me(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),o=[],i=function(e){e&&(n.isSupportedCode(e)?o.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):"string"==typeof e&&i(this.formatLanguageCode(e)),r.forEach((function(e){o.indexOf(e)<0&&i(n.formatLanguageCode(e))})),o}}]),e}(),ge=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],ve={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};function ye(){var e={};return ge.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:ve[t.fc]}}))})),e}var be=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};q(this,e),this.languageUtils=t,this.options=n,this.logger=Y.create("pluralResolver"),this.rules=ye()}return z(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map((function(e){return t+e}))}},{key:"getSuffixes",value:function(e){var t=this,n=this.getRule(e);return n?n.numbers.map((function(n){return t.getSuffix(e,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var o=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),i=r.numbers[o];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var a=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?"_plural_".concat(i.toString()):a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?a():this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),ke=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};q(this,e),this.logger=Y.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return z(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:le,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?ae(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?ae(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?ae(t.nestingPrefix):t.nestingPrefixEscaped||ae("$t("),this.nestingSuffix=t.nestingSuffix?ae(t.nestingSuffix):t.nestingSuffixEscaped||ae(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var o,i,a,s=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(e){return e.replace(/\$/g,"$$$$")}var c=function(e){if(e.indexOf(s.formatSeparator)<0){var o=oe(t,l,e);return s.alwaysFormat?s.format(o,void 0,n):o}var i=e.split(s.formatSeparator),a=i.shift().trim(),u=i.join(s.formatSeparator).trim();return s.format(oe(t,l,a),u,n,r)};this.resetRegExp();var f=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,p=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return u(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?u(s.escape(e)):u(e)}}].forEach((function(t){for(a=0;o=t.regex.exec(e);){if(void 0===(i=c(o[1].trim())))if("function"==typeof f){var n=f(e,o,r);i="string"==typeof n?n:""}else{if(p){i=o[0];continue}s.logger.warn("missed to pass in variable ".concat(o[1]," for interpolating ").concat(e)),i=""}else"string"==typeof i||s.useRawValueToEscape||(i=Z(i));if(e=e.replace(o[0],t.safeValue(i)),t.regex.lastIndex=0,++a>=s.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=U({},i);function s(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),o="{".concat(r[1]);e=r[0],o=(o=this.interpolate(o,a)).replace(/'/g,'"');try{a=JSON.parse(o),t&&(a=U({},t,a))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(o)}return delete a.defaultValue,e}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(e);){var l=[],u=!1;if(n[0].includes(this.formatSeparator)&&!/{.*}/.test(n[1])){var c=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=c.shift(),l=c,u=!0}if((r=t(s.call(this,n[1].trim(),a),a))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=Z(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),u&&(r=l.reduce((function(e,t){return o.format(e,t,i.lng,i)}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();var we=function(e){function t(e,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return q(this,t),o=H(this,W(t).call(this)),ue&&X.call($(o)),o.backend=e,o.store=n,o.services=r,o.languageUtils=r.languageUtils,o.options=i,o.logger=Y.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(r,i.backend,i),o}return G(t,e),z(t,[{key:"queueLoad",value:function(e,t,n,r){var o=this,i=[],a=[],s=[],l=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&o.store.hasResourceBundle(e,t)?o.state[s]=2:o.state[s]<0||(1===o.state[s]?a.indexOf(s)<0&&a.push(s):(o.state[s]=1,r=!1,a.indexOf(s)<0&&a.push(s),i.indexOf(s)<0&&i.push(s),l.indexOf(t)<0&&l.push(t)))})),r||s.push(e)})),(i.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:r}),{toLoad:i,pending:a,toLoadLanguages:s,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),o=r[0],i=r[1];t&&this.emit("failedLoading",o,i,t),n&&this.store.addResourceBundle(o,i,n),this.state[e]=t?-1:2;var a={};this.queue.forEach((function(n){var r,s,l,u,c,f;r=n.loaded,s=i,u=te(r,[o],Object),c=u.obj,f=u.k,c[f]=c[f]||[],l&&(c[f]=c[f].concat(s)),l||c[f].push(s),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){a[e]||(a[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){a[e].indexOf(t)<0&&a[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,a=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(s,l){s&&l&&o<5?setTimeout((function(){r.read.call(r,e,t,n,o+1,2*i,a)}),i):a(s,l)})):a(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var i=this.queueLoad(e,t,r,o);if(!i.toLoad.length)return i.pending.length||o(),null;i.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),o=r[0],i=r[1];this.read(o,i,"read",void 0,void 0,(function(r,a){r&&t.logger.warn("".concat(n,"loading namespace ").concat(i," for language ").concat(o," failed"),r),!r&&a&&t.logger.log("".concat(n,"loaded namespace ").concat(i," for language ").concat(o),a),t.loaded(e,r,a)}))}},{key:"saveMissing",value:function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,U({},i,{isUpdate:o})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}(X);function xe(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===M(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===M(e[2])||"object"===M(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function Te(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Oe(){}var _e=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(q(this,t),e=H(this,W(t).call(this)),ue&&X.call($(e)),e.options=Te(n),e.services={},e.logger=Y,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),H(e,$(e));setTimeout((function(){e.init(n,r)}),0)}return e}return G(t,e),z(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=U({},xe(),this.options,Te(t)),this.format=this.options.interpolation.format,n||(n=Oe),!this.options.isClone){this.modules.logger?Y.init(r(this.modules.logger),this.options):Y.init(null,this.options);var o=new he(this.options);this.store=new ce(this.options.resources,this.options);var i=this.services;i.logger=Y,i.resourceStore=this.store,i.languageUtils=o,i.pluralResolver=new be(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),i.interpolator=new ke(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new we(r(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(i.languageDetector=r(this.modules.languageDetector),i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=r(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new de(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.length>0&&"dev"!==a[0]&&(this.options.lng=a[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var s=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];s.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var l=["addResource","addResources","addResourceBundle","removeResourceBundle"];l.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var u=Q(),c=function(){var t=function(t,r){e.isInitialized&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),u.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),u}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oe,r=n,o="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(o&&"cimode"===o.toLowerCase())return r();var i=[],a=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){i.indexOf(e)<0&&i.push(e)}))};if(o)a(o);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(e){return a(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return a(e)})),this.services.backendConnector.load(i,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(e,t,n){var r=Q();return e||(e=this.languages),t||(t=this.options.ns),n||(n=Oe),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&fe.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=Q();this.emit("languageChanging",e);var o=function(e){var o="string"==typeof e?e:n.services.languageUtils.getBestMatchFromCodes(e);o&&(n.language||(n.language=o,n.languages=n.services.languageUtils.toResolveHierarchy(o)),n.translator.language||n.translator.changeLanguage(o),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(o)),n.loadResources(o,(function(e){!function(e,o){o?(n.language=o,n.languages=n.services.languageUtils.toResolveHierarchy(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,o)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t){var n=this,r=function e(t,r){var o;if("object"!==M(r)){for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];o=n.options.overloadTranslationOptionHandler([t,r].concat(a))}else o=U({},r);return o.lng=o.lng||e.lng,o.lngs=o.lngs||e.lngs,o.ns=o.ns||e.ns,n.t(t,o)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],o=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,a);if(void 0!==s)return s}return!!this.hasResourceBundle(r,e)||(!this.services.backendConnector.backend||!(!a(r,e)||o&&!a(i,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=Q();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=Q();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],o=e.filter((function(e){return r.indexOf(e)<0}));return o.length?(this.options.preload=r.concat(o),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new t(e,n)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oe,o=U({},this.options,n,{isClone:!0}),i=new t(o),a=["store","services","language"];return a.forEach((function(t){i[t]=e[t]})),i.services=U({},this.services),i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i.translator=new de(i.services,i.options),i.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e].concat(n))})),i.init(o,r),i.translator.options=i.options,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}}]),t}(X));function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pe(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(){this.funcTokens=[],this.arithmeticToken=y,this.operatorTokens=g,this.constTokens=[],this.fieldTokens=[],this.funcTypes={},this.inputToken=m,this.empty_token=p,this.funcTokenObj={},this.constTokenObj={}}Le.prototype.generateToken=function(e){this.generateFuncType(),this.generateFuncTokens(e),this.translatePlaceholder(),this.generateFieldTokens(e.fields),this.generateConstTokens()},Le.prototype.generateFuncType=function(){var e=this;Object.keys(V).forEach((function(e){V[e].forEach((function(t){t.classification=e}))})),Object.values(V).forEach((function(t){t.forEach((function(t){e.funcTypes[t.name]=t}))}))},Le.prototype.generateFuncTokens=function(e){var t=I(Object.values(this.funcTypes)),n=[];e.defineFunctions&&(n=I(e.defineFunctions));var r=this.mergeFuncTypes(t,n);this.funcTokens=this.generateFuncToken(r)},Le.prototype.generateFieldTokens=function(e){var t=I(e);!function e(t){t.forEach((function(t){t.token=d,t.child&&t.child.length>0&&e(t.child)}))}(t),this.fieldTokens=t},Le.prototype.mergeFuncTypes=function(e,t){var n=[],r=[],o=[],i=[],a=[],s=[];return e.map((function(e){r.push(e.name)})),t.map((function(e){o.push(e.name)})),o.map((function(e){r.includes(e)?a.push(e):i.push(e)})),t.map((function(t){a.includes(t.name)&&s.push(t),i.includes(t.name)&&e.push(t)})),e.forEach((function(e){s.forEach((function(t){e.name===t.name&&(e=Ce(Ce({},e),t))})),n.push(e)})),n},Le.prototype.generateFuncToken=function(e){var t=this,n=[];function r(e){var t=[];return e.forEach((function(){t.push(Ce({},p))})),t}function o(e){var t=[];return e.forEach((function(e){t.push(e)})),t}return e.map((function(e){var i=e.name,a=e.desc,s=e.params,l=Pe(e,["name","desc","params"]),u=I(Ce(Ce({},v),{name:i,desc:a,placeholder:o(s),params:r(s),limitParameterLength:e.limitParameterLength,minParameterLength:s.length,extra:l}));n.push(u),t.funcTokenObj[i]=u})),n},Le.prototype.generateConstTokens=function(){var e=this,t=[];Object.values(h).forEach((function(n){var r=n.token,o=n.value,i=(Pe(n,["token","value"]),{token:r,value:o,name:o});e.constTokenObj[i.name]=i,t.push(i)})),this.constTokens=t},Le.prototype.resetPlaceholder=function(e){this.funcTokenObj[e.name]&&(e.placeholder||(e.placeholder=[]),this.funcTokenObj[e.name].placeholder.forEach((function(t,n){e.placeholder[n]=t})))},Le.prototype.translatePlaceholder=function(){Object.entries(this.funcTokenObj).forEach((function(e){var t=Se(e,2),n=t[0],r=t[1];r.desc.intro=_e.t("".concat(n.toLowerCase(),"Intro")),r.desc.parameters.forEach((function(e,t){r.desc.parameters[t]=_e.t("".concat(n.toLowerCase(),"Params").concat(t+1))}))}))};var Ne=Le;function Fe(){}Fe.prototype.addArithToken=function(e){var t=this,n=this.findTargetToken(this.formula,this.currentToken.parentUniqueId,"uniqueId"),r=I(y);if(r.operator=e.operator,r.type=e.value,n){r.params.splice(0,1,I(this.currentToken));var o=n.params.findIndex((function(e){return e.uniqueId===t.currentToken.uniqueId}));if(o<0)return;return i(r.params),n.params.splice(o,1,r),this.updateId(this.formula),this.currentToken=r,this.findNext(),void this.emitTokenUpdated()}if(0===this.formula.length)return r.isArithTop=!0,this.formula.push(r),this.updateId(this.formula),this.currentToken=r,this.findNext(),void this.emitTokenUpdated();function i(e){e.forEach((function(e){e.isArithTop&&delete e.isArithTop,e.params&&e.params.length>0&&i(e.params)}))}this.currentToken&&["field","input","const_token","function","arithmetic_token"].includes(this.currentToken.token)&&(r.params.splice(0,1,this.currentToken),r.isArithTop=!0,this.formula=[r],i(r.params),this.updateId(this.formula),this.currentToken=r,this.findNext(),this.emitTokenUpdated())};var Ae=Fe,Re=["name","params","value","token","paramTokens","operator","type"];function Ve(e){F.call(this),R.call(this),Ne.call(this),Ae.call(this),this.Bus=e,this.formula=[],this.currentToken={},this.emptyTokenId=[]}Ve.prototype=Object.assign(F.prototype,R.prototype,Ne.prototype,Ae.prototype),Ve.prototype.getValue=function(){if(!this.formula)return{type:"InvalidParams",value:null};var e=I(this.formula);return this.validParams(e)?(this.deleteExtraParams(e),{type:"success",value:e[0]}):{type:"InvalidParams",value:null}},Ve.prototype.deleteExtraParams=function(e){var t=this;e.forEach((function(e){Object.keys(e).forEach((function(t){Re.includes(t)||delete e[t]})),e.params&&e.params.length>0&&t.deleteExtraParams(e.params)}))},Ve.prototype.validParams=function(e,t){var n=!0;return e&&0===e.length&&(n=!1),function e(t,r){t.forEach((function(t){f.includes(t.token)&&!t.value&&n&&(n=!1),t.params&&0===t.params.length&&(n=!1),t.params&&t.params.length>0&&e(t.params,r)}))}(e,t),n},Ve.prototype.initInitialValue=function(e){var t=this;if(e&&"[object Object]"===Object.prototype.toString.call(e)&&"{}"!==JSON.stringify(e)){this.currentToken={};var n=I([e]);this.updateId(n),function e(n){n.forEach((function(n){n.params&&n.params.length>0&&(t.funcTokenObj&&t.funcTokenObj[n.name]&&t.funcTokenObj[n.name].limitParameterLength&&(n.limitParameterLength=t.funcTokenObj[n.name].limitParameterLength,n.minParameterLength=t.funcTokenObj[n.name].params.length),t.resetPlaceholder(n),e(n.params))}))}(n),this.formula=n,this.emitTokenUpdated()}},Ve.prototype.clear=function(){this.formula=[],this.currentToken={},this.emitTokenUpdated()},Ve.prototype.parseTree2ExcelFormula=function(){var e=this.getValue();if("success"===e.type){var t=e.value;console.log(t)}};var Me=Ve;function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ue=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callbacks={}}var t,n,r;return t=e,(n=[{key:"$on",value:function(e,t){this.callbacks[e]=this.callbacks[e]||[],this.callbacks[e].push(t)}},{key:"$emit",value:function(e,t){this.callbacks[e]&&this.callbacks[e].forEach((function(e){return e(t)}))}}])&&De(t.prototype,n),r&&De(t,r),e}();function qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e||{},this.FML=null,this.Bus=new Ue}_e.init({lng:"en",debug:!1,resources:{"zh-CN":{translation:{inputPlaceholder:"请输入值",emptyTip:"请选择",all:"全部",arithmetic:"算术",formula:"公式",fields:"变量",expIntro:"返回 e 的 n 次方",expParams1:"Number: 指数。常数 e 等于 2.71828182845904，是自然对数的底",logIntro:"根据给定底数返回数字的对数",logParams1:"Number: 要取其对数的正实数",logParams2:"Base: 计算对数时所使用的底数",powerIntro:"返回某数的乘幂",powerParams1:"Number: 底数，任何实数",powerParams2:"Power: 幂值",sqrtIntro:"返回数值的平方根",sqrtParams1:"Number: 要对其求平方根的数值",sumIntro:"返回一组数值的总和",sumParams1:"number1: 第一个参数",sumParams2:"number2: 第二个参数",countIntro:"COUNT函数可以获取参数的数量",countParams1:"number1: 第一个参数",countParams2:"number2: 第二个参数",averageIntro:"返回其参数的算术平均值",averageParams1:"number1: 第一个参数",averageParams2:"number2: 第二个参数",productIntro:"返回一组数值相乘的值",productParams1:"number1: 第一个参数",productParams2:"number2: 第二个参数",subtractionIntro:"返回一组数值相减的值",subtractionParams1:"number1: 第一个参数",subtractionParams2:"number2: 第二个参数",divisionIntro:"返回一组数值相除的值",divisionParams1:"number1: 第一个参数",divisionParams2:"number2: 第二个参数"}},en:{translation:{inputPlaceholder:"Please input the value",emptyTip:"Please choose",all:"All",arithmetic:"Arithmetic",formula:"Formula",fields:"Fields",expIntro:"Returns e raised to the power of a given number.",expParams1:"Number: is the exponent applied to the base e. The constant e equals 2.71828182845904, the base of the natural logarithm.",logIntro:"Returns the logarithm of a number to the base you specify.",logParams1:"Number: is the positive real number for which you want the logarithm.",logParams2:"Base: is the base of the logarithm; 10 if omitted.",powerIntro:"Returns the result of a number raised to a power.\n",powerParams1:"Number: is the base number, any real number.",powerParams2:"Power: is the exponent, to which the base number is raised.",sqrtIntro:"Returns the square root of a number.",sqrtParams1:"Number: is the number for which you want the square root.",sumIntro:"Returns the sum of all the numbers",sumParams1:"number1: First parameter",sumParams2:"number2: Second parameter",countIntro:"Returns the number of parameters",countParams1:"number1: First parameter",countParams2:"number2: Second parameter",averageIntro:"Returns the average (arithmetic mean) of its arguments",averageParams1:"number1: First parameter",averageParams2:"number2: Second parameter",productIntro:"Multiplies all the numbers given as arguments.",productParams1:"number1: First parameter",productParams2:"number2: Second parameter",subtractionIntro:"Returns the difference of all the numbers.",subtractionParams1:"number1: First parameter",subtractionParams2:"number2: Second parameter",divisionIntro:"Returns the quotient of all the numbers",divisionParams1:"number1: First parameter",divisionParams2:"number2: Second parameter"}}}}),qe.prototype.init=function(){var e=this;return new Promise((function(t){e.FML=new Me(e.Bus),e.FML.generateToken(e.options),t(!0)}))},qe.prototype.initPreview=function(e){this.FML=new Me(this.Bus),this.FML.initInitialValue(e)},qe.prototype.changeLocale=function(e){_e.changeLanguage(e)};var Be=qe;function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var We=null,Ke=null,Ge={inheritAttrs:!1,name:"FormulaBuilder",data:function(){return{prohibitInput:!1,iptValue:"",watchInput:!0,selectContent:{key:"",value:""},desc:null,formula:[],funcTokens:[],cacheFuncTokens:[],constTokens:[],operatorTokens:[],currentToken:{},enableConst:!1,currentOperatorId:"",fields:[],width:"640px",emptyTip:"",inputPlaceholder:"",options:[],showSelect:!1,translate:{},previewInfo:null}},methods:{init:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n){t.locale&&_e.changeLanguage(t.locale).then((function(){e.initTranslate()})),(We=new Be({fieldsValue:t.fieldsValue||[],defineFunctions:t.defineFunctions||[],initialValue:t.initialValue||{},fields:t.fields||[]})).init().then((function(){Ke=We.FML,["width","prohibitInput","enableConst","showSelect"].forEach((function(n){t[n]&&(e[n]=t[n])})),["emptyTip","inputPlaceholder"].forEach((function(n){t[n]&&(e.translate[n]=t[n])})),e.selectContent=e.options[0],e.fields=Ke.fieldTokens,e.funcTokens=Ke.funcTokens,e.constTokens=Ke.constTokens,e.operatorTokens=Ke.operatorTokens,e.cacheFuncTokens=I(Ke.funcTokens),e.initEvent(),e.handleTriggerIntro(e.funcTokens[0]),e.initValue(t),e.initOptions(t),e.handleSelectChange(e.options[0].value),n(Ke)}))}))},initEvent:function(){var e=this;We.Bus.$on("update",(function(t){var n=t.formula,r=t.currentToken;e.currentToken=r,e.formula=n,e.previewInfo=n[0],r.token||(e.watchInput=!1,e.iptValue=""),e.$nextTick((function(){e.watchInput=!0}))})),We.Bus.$on("updateIntro",(function(t){var n=t.intro;e.desc=n}))},initValue:function(e){e.initialValue&&Ke.initInitialValue(e.initialValue)},initTranslate:function(){this.options=[{value:"All",key:_e.t("all")}],this.translate={emptyTip:_e.t("emptyTip"),inputPlaceholder:_e.t("inputPlaceholder"),arithmetic:_e.t("arithmetic"),formula:_e.t("formula"),fields:_e.t("fields")}},initOptions:function(e){var t=this;e.options&&e.options.map((function(e){t.options.forEach((function(t){e.value===t.value&&(t.key=e.key)}))}))},handleTriggerIntro:function(e){Ke.setFuncIntro(e)},handleAddFuncToken:function(e){Ke.wrapFuncToken(e)},handleAddArithToken:function(e){Ke.addArithToken(e)},handleTokenItem:function(e){e.token&&"input"===e.token?this.iptValue=e.value:(this.watchInput=!1,this.iptValue=""),Ke.setCurrentToken(e)},handleAddEmptyToken:function(e){Ke.addEmptyToken(e)},handleDeleteToken:function(e){Ke.deleteToken(e)},handleResetToken:function(e){Ke.resetToken(e)},handleEmptyValue:function(e){Ke.emptyValue(e)},handleFuncTokenItem:function(e){Ke.setCurrentToken(e.obj)},handleKeyupEnter:function(){var e=Ke.findNext();Ke.emitTokenUpdated(),e&&(this.iptValue="")},mouseleaveOperator:function(){this.currentOperatorId=""},mouseoverOperator:function(e){this.currentOperatorId=e.uniqueId},handleSelectChange:function(e){this.funcTokens="All"===e?this.cacheFuncTokens.filter((function(e){return e})):this.cacheFuncTokens.filter((function(t){return t.extra.classification===e}))},handleFieldItem:function(e){this.setFieldValue({value:e.field,token:"field"})},setFieldValue:function(e,t){Ke.modifyValue(e,t),e.token&&"input"!==e.token&&(this.watchInput=!1,this.iptValue="")},setFields:function(e){Ke.generateFieldTokens(e),this.fields=Ke.fieldTokens},parseTree2ExcelFormula:function(){var e=Ke.parseTree2ExcelFormula();console.log(e)},getValue:function(){return Ke.getValue()},clear:function(){Ke.clear(),this.iptValue=""}},watch:{iptValue:function(){this.watchInput?this.setFieldValue($e($e({},Ke.inputToken),{},{value:this.iptValue}),!1):this.watchInput=!0}}},Je=n(5),Ye={insert:"head",singleton:!1},Xe=(o()(Je.a,Ye),Je.a.locals,n(6)),Qe={insert:"head",singleton:!1},Ze=(o()(Xe.a,Qe),Xe.a.locals,k(Ge,E,[],!1,null,null,null));Ze.options.__file="src/packages/formula/src/index.vue";var et=Ze.exports;et.install=function(e){e.component(et.name,et)};var tt=function(){var e=this.$createElement;return(this._self._c||e)("formula-preview-item",{attrs:{formula:this.formula,firstParameter:this.formula[0]}})};tt._withStripped=!0;var nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._l(e.formula,(function(t){return["function"!==t.token&&"arithmetic_token"!==t.token?[n("span",{key:t.id},[n("span",[e._v("\n          "+e._s(t.value)+"\n        ")])])]:e._e(),e._v(" "),"arithmetic_token"===t.token?[e.firstParameter&&"arithmetic_token"===e.firstParameter.token?e._e():n("span",[e._v("(")]),e._v(" "),n("formula-preview-item",{key:"arith"+t.id+1,attrs:{formula:[t.params[0]]}}),e._v(" "),n("span",{key:"arith"+t.id+2,class:[["**","*"].includes(t.operator)?"vertical-sub":""]},[e._v(e._s(t.operator))]),e._v(" "),n("formula-preview-item",{key:"arith"+t.id+3,attrs:{formula:[t.params[1]]}}),e._v(" "),e.firstParameter&&"arithmetic_token"===e.firstParameter.token?e._e():n("span",[e._v(")")])]:e._e(),e._v(" "),"function"===t.token?n("span",{key:t.id},["function"===t.token?n("span",[e._v(e._s(t.name))]):e._e(),e._v(" "),"function"===t.token?n("span",[e._v("(")]):e._e(),e._v(" "),e._l(t.params,(function(r,o){return[e.parameterTokens.includes(r.token)?[n("span",{key:r.id,staticClass:"fml-formula-field fml-relative"},[n("span",[e._v("\n              "+e._s(r.value)+"\n            ")])])]:"arithmetic_token"===r.token?[n("formula-preview-item",{key:"arith"+r.id+1,attrs:{formula:[r.params[0]]}}),e._v(" "),n("span",{key:"arith"+r.id+2,class:[["**","*"].includes(t.operator)?"vertical-sub":""]},[e._v(e._s(r.operator))]),e._v(" "),n("formula-preview-item",{key:"arith"+r.id+3,attrs:{formula:[r.params[1]]}})]:"function"===r.token?[n("formula-preview-item",{key:r.id,attrs:{formula:[r]}})]:e._e(),e._v(" "),o!==t.params.length-1?n("span",{key:"comma"+r.id},[e._v(",")]):e._e()]})),e._v(" "),"function"===t.token?n("span",[e._v(")")]):e._e()],2):e._e()]}))],2)};nt._withStripped=!0;var rt={name:"FormulaPreviewItem",props:{formula:{type:Array,default:function(){return[]}},firstParameter:{type:Object,default:function(){}}},data:function(){return{parameterTokens:f}}},ot=n(7),it={insert:"head",singleton:!1},at=(o()(ot.a,it),ot.a.locals,k(rt,nt,[],!1,null,null,null));at.options.__file="src/packages/formula-preview/src/formula-preview-item.vue";var st=at.exports,lt=null,ut=k({components:{FormulaPreviewItem:st},inheritAttrs:!1,name:"FormulaPreview",props:{initialValue:{type:Object}},data:function(){return{formulaId:1,formula:[]}},beforeCreate:function(){var e=this;(lt=new Be).Bus.$on("update",(function(t){var n=t.formula;e.formula=n}))},watch:{initialValue:{handler:function(){lt&&lt.initPreview(this.initialValue)},immediate:!0,deep:!0}}},tt,[],!1,null,null,null);ut.options.__file="src/packages/formula-preview/src/index.vue";var ct=ut.exports;ct.install=function(e){e.component(ct.name,ct)};var ft=function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",e._b({class:["fml-input",e.error?"fml-input-err":""],domProps:{value:e.value},on:{input:e.onInput,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("keyupEnter")}}},"input",e.$attrs,!1))};ft._withStripped=!0;var pt={name:"FormulaInput",inheritAttrs:!1,props:{value:{type:String,default:""},valueType:{type:String,default:""}},data:function(){return{error:!1}},methods:{onInput:function(e){this.$attrs.disabled||("number"===this.valueType&&(this.error=!!isNaN(e.target.value)),this.$emit("input",e.target.value))}}},dt=n(8),mt={insert:"head",singleton:!1},ht=(o()(dt.a,mt),dt.a.locals,k(pt,ft,[],!1,null,"415832ce",null));ht.options.__file="src/packages/input/src/index.vue";var gt=ht.exports;gt.install=function(e){e.component(gt.name,gt)};var vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fml-select-wrapper fml-select"},[n("div",{staticClass:"fml-flex fml-jc fml-relative fml-select-input-wraper",on:{click:e.triggerOption}},[n("div",{staticClass:"fml-select-input"},[n("div",{staticClass:"fml-select fml-select-content"},[e._v(e._s(e.value.key))])]),e._v(" "),n("div",{staticClass:"fml-select fml-triangle-wrapper"},[n("i",{staticClass:"fml-select fml-triangle-down"},[n("svg",{staticClass:"fml-svg-icon"},[n("use",{attrs:{"xlink:href":"#fml-icon-sanjiao"}})])])])]),e._v(" "),n("div",{staticClass:"fml-select fml-option-wrapper"},e._l(e.options,(function(t){return n("div",{key:t.value,staticClass:"fml-select fml-option-item",attrs:{"data-value":t.value},on:{click:function(n){return e.handleSelect(t)},touchmove:function(e){e.preventDefault()}}},[e._v(e._s(t.key))])})),0)])};function yt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}vt._withStripped=!0;var kt={name:"FormulaSelect",props:{options:{type:Array},value:{type:Object,default:function(){return{value:0,key:"请选择"}}}},mounted:function(){var e,t,n=document.querySelector(".fml-select-input-wraper");document.querySelector(".fml-option-wrapper").style.width=parseInt((t="width",(e=n).currentStyle?e.currentStyle[t]:getComputedStyle(e,null)[t]))+0+"px",this.initEvent()},computed:{optionWrapper:function(){return document.querySelector(".fml-option-wrapper")},subjectList:function(){return document.getElementsByClassName("fml-option-item")},triangleDown:function(){return document.querySelector(".fml-triangle-down")}},methods:{triggerOption:function(){j(this.optionWrapper,"fml-select-show")?(L(this.optionWrapper,"fml-select-show"),L(this.triangleDown,"fml-triangle-rotate")):(C(this.optionWrapper,"fml-select-show"),C(this.triangleDown,"fml-triangle-rotate"));var e,t=yt(this.subjectList);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.dataset.value==this.value.value?C(n,"fml-select-hover"):L(n,"fml-select-hover")}}catch(e){t.e(e)}finally{t.f()}},handleSelect:function(e){L(this.optionWrapper,"fml-select-show"),L(this.triangleDown,"fml-triangle-rotate"),this.$emit("input",e),this.$emit("change",e.value,e)},hideSelect:function(e){var t=e.target;t&&"string"==typeof t.className&&t.className.indexOf("fml-select")<0&&(L(this.optionWrapper,"fml-select-show"),L(this.triangleDown,"fml-triangle-rotate"))},initEvent:function(){document.body.addEventListener("click",this.hideSelect,!1)}},beforeDestroy:function(){document.body.removeEventListener("click",this.hideSelect)}},wt=n(9),xt={insert:"head",singleton:!1},Tt=(o()(wt.a,xt),wt.a.locals,k(kt,vt,[],!1,null,null,null));Tt.options.__file="src/packages/select/src/index.vue";var Ot=Tt.exports;Ot.install=function(e){e.component(Ot.name,Ot)};n(11);var _t=[S,et,ct,gt,Ot],St=function(e){_t.forEach((function(t){e.component(t.name,t)}))};"undefined"!=typeof window&&window.Vue&&St(window.Vue);t.default={version:"1.1.0",install:St,FormulaBuilder:et,FormulaPreview:ct,FormulaInput:gt,FormulaSelect:Ot}}]).default}));